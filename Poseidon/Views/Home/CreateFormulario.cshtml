
<style scoped>
    .file-icon {
        display: inline-block;
        float: left;
        width: 48px;
        height: 48px;
        margin-left: 10px;
        margin-top: 13.5px;
    }

    #example .file-heading {
        font-family: Arial;
        font-size: 1.1em;
        display: inline-block;
        float: left;
        width: 450px;
        margin: 0 0 0 20px;
        height: 25px;
        -ms-text-overflow: ellipsis;
        -o-text-overflow: ellipsis;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
    }

    #example .file-name-heading {
        font-weight: bold;
    }

    #example .file-size-heading {
        font-weight: normal;
        font-style: italic;
    }

    li.k-file .file-wrapper .k-upload-action {
        position: absolute;
        top: 0;
        right: 0;
    }

    li.k-file div.file-wrapper {
        position: relative;
        height: 75px;
    }
    .formfield * {
    vertical-align:inherit;
     
        top: 0;
        right: 300px;
}
  .Table-Normal {
    position: relative;
    //display: block;
    margin: 10px auto;
    padding: 0;
    width: 300px;
    height: auto;
    border-collapse: collapse;
    text-align: center;
} 

</style>






@model Poseidon.Models.Logger

@{
    ViewBag.Title = "CreateFormulario";
}

<h2>CreateFormulario</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Logger</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <fieldset class="k-block">

            <h3>Detalles del Sitio</h3>

            <table >



                <tr class="">

                    <td>
                     
                            @Html.LabelFor(model => model.latitude, htmlAttributes: new { @class = "control-label col-md-2" })
                    

                    </td>

                    <td>

                   
                            @Html.EditorFor(model => model.latitude, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.latitude, "", new { @class = "text-danger" })
                     

                    </td>

                    <td align="">



                            <label for="fullname" class="required">Es necesario Acceder al Sitio?</label>
                       

                    </td>





                    <td>



                        <fieldset class="k-block">

                            <input type="checkbox" value="Red" data-bind="checked: colors" />

                            <label for="theme_red">Si</label>



                            <input type="checkbox" value="Red" data-bind="checked: colors" />

                            <label for="theme_white">No</label>



                        </fieldset>


                    </td>



                </tr>



                <tr>

                    <td>
                      
                            @Html.LabelFor(model => model.longitute, htmlAttributes: new { @class = "control-label col-md-2" })
                    

                    </td>

                    <td>
                      
                            @Html.EditorFor(model => model.longitute, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.longitute, "", new { @class = "text-danger" })
                   

                    </td>

                    <td>
                       
                            <label for="fullname" class="required">Loger se Encuentra a la Interperie?</label>
                     

                    </td>

                    <td>

                        <fieldset class="k-block">

                            <input type="checkbox" value="Red" data-bind="checked: colors" />

                            <label for="">Si</label>



                            <input type="checkbox" value="Red" data-bind="checked: colors" />

                            <label for="">No</label>



                        </fieldset>

                    </td>



                </tr>



                <tr>

                    <td>
                     
                            @Html.LabelFor(model => model.elevation, htmlAttributes: new { @class = "control-label col-md-2" })
                     
                    </td>

                    <td>

                            @Html.EditorFor(model => model.elevation, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.elevation, "", new { @class = "text-danger" })
                 

                    </td>

                    <td>
                      
                        <label for="fullname" class="required">Condiciones del Lugar de la Instalacion?</label>
                    

                    </td>

                    <td>

                     
                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:condicion, value: multipleSelectValue"></select>
               

                    </td>



                </tr>

            </table>

        </fieldset>
        <br>
        <br>

        <fieldset class="k-block">

            <h3>Detalles de la Calidad de la Señal</h3>

            <table align="left">

                <tr align="left">

                    <td>

                        @Html.LabelFor(model => model.antenna_position, htmlAttributes: new { @class = "control-label col-md-2" })

                    </td>

                    <td>

                        <div class="col-md-10">
                            @Html.EditorFor(model => model.antenna_position, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.antenna_position, "", new { @class = "text-danger" })
                        </div>
                    </td>

                    <td>

                        <label for="fullname" class="required">Tipo de Antena Usada</label>

                    </td>

                    <td>

                        <select data-role="dropdownlist" data-text-field="name" data-value-field="value" data-bind="source:antena, value: dropDownListValue"></select>
                       

                    </td>



                </tr>



                <tr>

                    <td>

                        @Html.LabelFor(model => model.final_csq, htmlAttributes: new { @class = "control-label col-md-2" })

                    </td>

                    <td>

                        <div class="col-md-10">
                            @Html.EditorFor(model => model.final_csq, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.final_csq, "", new { @class = "text-danger" })
                        </div>

                    </td>

                    <td>

                        <label for="fullname" class="required">CSQ fuera de la Camara</label>

                    </td>

                    <td>
                        <fieldset class="k-block">

                            <input type="checkbox" value="Red" data-bind="checked: colors" />

                            <label for="theme_red">Si</label>



                            <input type="checkbox" value="Red" data-bind="checked: colors" />

                            <label for="theme_white">No</label>



                        </fieldset>
                    </td>



                </tr>

                <tr>

                    <td>

                        @Html.LabelFor(model => model.gprs_test_status, htmlAttributes: new { @class = "control-label col-md-2" })

                    </td>

                    <td>

                        <div class="col-md-10">
                            @Html.EditorFor(model => model.gprs_test_status, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.gprs_test_status, "", new { @class = "text-danger" })
                        </div>
                    </td>

                    <td>

                        <label for="fullname" class="required">Se puede Instalar Poste para Antena</label>

                    </td>

                    <td>
                        <div>
                            <fieldset class="">

                                <input type="checkbox" value="Red" data-bind="checked: colors" />

                                <label for="theme_red">Si</label>



                                <input type="checkbox" value="Red" data-bind="checked: colors" />

                                <label for="theme_white">No</label>



                            </fieldset>
                        </div>
                    </td>



                </tr>

            </table>

        </fieldset>

        <br>
        <br>
        <fieldset class="k-block">

            <h3>Detalles de la Instalacion</h3>

            <table align="left">



                <tr align="center">

                    <td>

                        @Html.LabelFor(model => model.instalation_type, htmlAttributes: new { @class = "control-label col-md-2" })

                    </td>

                    <td>

                        <div class="col-md-10">
                            @Html.EditorFor(model => model.instalation_type, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.instalation_type, "", new { @class = "text-danger" })
                        </div>

                    </td>

                    <td>

                        <label for="fullname" class="required">Estado del Flujometro</label>

                    </td>

                    <td>

                        <div class="">
                            <select multiple="multiple"
                                    data-role="dropdownlist"
                                    data-text-field="name"
                                    data-value-field="value"
                                    data-bind="source:condicion, value: multipleSelectValue"></select>
                        </div>

                    </td>



                </tr>



                <tr>

                    <td>

                        <label for="fullname" class="required">Lectura Manometro AAb</label>

                    </td>

                    <td>

                        <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                    </td>

                    <td>

                        <label for="fullname" class="required">Tipo de Flujometro</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flujometro, value:  Apple"></select>
                    </td>



                </tr>



                <tr>

                    <td>

                        <label for="fullname" class="required">Lectura Logger AAr</label>

                    </td>

                    <td>

                        <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                    </td>

                    <td>

                        <label for="fullname" class="required">Emisor de Pulsos</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>

                    </td>



                </tr>



                <tr>

                    <td>

                        <label for="fullname" class="required">Lectura Manometro AAb</label>

                    </td>

                    <td>

                        <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                    </td>

                    <td>

                        <label for="fullname" class="required">Fue Reeplazado el Emisor de Pulsos?</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>

                    </td>



                </tr>

                <tr>

                    <td>

                        <label for="fullname" class="required">Lectura Logger AAb</label>

                    </td>

                    <td>

                        <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                    </td>

                    <td>

                        <label for="fullname" class="required">Litros por Pulso</label>

                    </td>

                    <td>

                        <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                    </td>

                </tr>


            </table>

        </fieldset>

        <br>
        <br>
        <fieldset class="k-block">

            <h3>Detalles de la Camara</h3>

            <table align="left">



                <tr align="left">

                    <td>

                        <label for="fullname" class="required">Posicion del Logger</label>

                    </td>

                    <td>

                        <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                    </td>

                    <td>

                        <label for="fullname" class="required">Se necesita Bomba para Desaguar?</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>

                    </td>



                </tr>



                <tr>

                    <td>

                        <label for="fullname" class="required">Camara Inundada</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>

                    </td>

                    <td>

                        <label for="fullname" class="required">Se necesita Desviar/Manipular Trafico?</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>

                    </td>



                </tr>



                <tr>

                    <td>

                        <label for="fullname" class="required">Tipo de Camara</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:material, value:  Apple"></select>

                    </td>

                    <td>

                        <label for="fullname" class="required">Es necesario Herramienta para apertura de Camara?</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>

                    </td>



                </tr>



                <tr>

                    <td>

                        <label for="fullname" class="required">Condicion de La Camara</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:condicion, value:  Apple"></select>

                    </td>

                    <td>

                        <label for="fullname" class="required">Se necesita herramienta para apertura de Camara?</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>
                    </td>



                </tr>

                <tr>



                    <td>

                        <label for="fullname" class="required">Se necesitan 2 operadores para abrir la camara</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:flags, value:  Apple"></select>
                    </td>



                </tr>

                <tr>

                    <td>

                        <label for="fullname" class="required">Tipo de Tapa de Camara</label>

                    </td>

                    <td>

                        <select multiple="multiple"
                                data-role="dropdownlist"
                                data-text-field="name"
                                data-value-field="value"
                                data-bind="source:camara, value:  Apple"></select>

                    </td>





                </tr>

            </table>

        </fieldset>

        <br>

        <br>

        <fieldset class="k-block">

            <h3>Canales Usados del Logger</h3>

            <table align="left">



                <tr style="width:125px; height:150px" align="center">

                    <td>
                        <div style="width:125px; height:205px">
                            <label for="fullname" class="required">Canal 1</label>
                        </div>

                    </td>

                    <td>
                        <div style="width:125px; height:205px">
                            <select multiple="multiple"
                                    data-role="dropdownlist"
                                    data-text-field="name"
                                    data-value-field="value"
                                    data-bind="source:canales, value:selectValue"></select>
                        </div>

                    </td>

                    <td>
                        <div style="width:125px; height:205px">
                            <label for="fullname" class="required">Canal 3</label>
                        </div>

                    </td>

                    <td>
                        <div style="width:125px; height:205px">
                            <select multiple="multiple"
                                    data-role="dropdownlist"
                                    data-text-field="name"
                                    data-value-field="value"
                                    data-bind="source:canales, value:selectValue"></select>
                        </div>

                    </td>



                </tr>



                <tr>

                    <td align="center">
                        <div style="width:125px; height:205px">
                            <label for="fullname" class="required">  Canal 2</label>
                        </div>

                    </td>

                    <td>
                        <div style="width:125px; height:205px">
                            <select multiple="multiple"
                                    data-role="dropdownlist"
                                    data-text-field="name"
                                    data-value-field="value"
                                    data-bind="source:canales, value: selectValue"></select>
                        </div>

<td align="center">
    <div style="width:125px; height:205px">
        <label for="fullname" class="required">Canal 4</label>
    </div>

</td>

                    <td>
                        
                        <div style="width:125px; height:205px">
                            <select multiple="multiple"
                                    data-role="dropdownlist"
                                    data-text-field="name"
                                    data-value-field="value"
                                    data-bind="source:canales, value: selectValue"></select>
                    </div>

                </td>

            </tr>
        </table>

    </fieldset>

    <br>
    <br>


    <fieldset class="k-block">

        <h3>Equipamiento Utilizado(Por el Instalador)</h3>

        <table align="left">



            <tr align="left">

                <td>

                    <label for="fullname" class="required">Tipo de Logger</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>

                <td>

                    <label for="fullname" class="required">Bateria Instalada?</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>



            </tr>



            <tr>

                <td>

                    <label for="fullname" class="required">N/S Logger</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>

                <td>

                    <label for="fullname" class="required">Tipo de Bateria</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>



            </tr>

            <tr>

                <td>

                    <label for="fullname" class="required">>N/S Bateria</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>

            </tr>
        </table>

    </fieldset>

    <br>
    <br>


    <fieldset class="k-block">

        <h3>Descripcion Detallada</h3>

        <table align="left">



            <tr align="left">

                <td>

                    <label for="fullname" class="required">Comentarios</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>

                <td>

                    <label for="fullname" class="required">Fecha</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>



            </tr>



            <tr>

                <td>

                    <label for="fullname" class="required">Hora</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>

                <td>

                    <label for="fullname" class="required">Realizado Por</label>

                </td>

                <td>

                    <input type="text" id="fullname" name="studentname" class="k-textbox" placeholder="Full student name" required validationmessage="Please enter {0}" />

                </td>





                <div id="kendoUploadZone">

                    <div id="kendoUploadForm" style="display: inline-block; padding-bottom: 30px; width: 700px;">

                        <!-- Kendo UI Upload Control for uploading image -->

                        <div id="kendoUploadControl" style="width: 50%; float: left;">

                            @(Html.Kendo().Upload()

                  .Name("files").Async(a => a

                                                .Save("Save", "Home")

                                                .Remove("Remove", "Home")

                                                .AutoUpload(true)).Events(events => events.Select("onSelect")

                                                                                        .Success("onSuccess")

                                                                                        ))

                        </div>

                        <!-- Instant preview uploaded image by Kendo UI Upload Control -->

                        <div id="kendoUploadDisplay" style="width: 45%; float: right;">





                            @Html.HiddenFor(x => x.PictureId)

                            @Html.HiddenFor(x => x.PictureName)

                            @Html.HiddenFor(x => x.PictureUrl)

                            @Html.HiddenFor(x => x.Status)

                            <div id="kendoUploadImage" style="display: block;">

                                <img id="imgUploaded" style="width: 60px; height: 60px;" src=""
                                     alt="loading" />

                            </div>





                        </div>

                    </div>

                </div>

















            </tr>

        </table>

    </fieldset>

    

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Create" class="btn btn-default" />
        </div>
    </div>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
<script>



    var viewModel = kendo.observable({
        material: [
            { id: 1, name: "Albañilería" },
            { id: 2, name: "Hormigon Armado" },
            { id: 3, name: "Metalica" },
            { id: 4, name: "Hormigon" }
        ],

        condicion: [
            { id: 1, name: "Ideale" },
            { id: 2, name: "Regular" },
            { id: 3, name: "Mala" }
        ],
        antena: [
            { id: 1, name: "Polarizacion Vertical" },
            { id: 2, name: "Domo" },

        ],

        flujometro: [
           { id: 1, name: "Electromagnetico Tubo" },
           { id: 2, name: "Velocimetro Tubo" },
           { id: 3, name: "Electromagnetico Insercion" },
            { id: 4, name: "Velocimetro Insercion" },

        ],
        flags: [
            { id: 1, name: "SI" },
            { id: 2, name: "NO" },


        ],

        camara: [
           { id: 1, name: "Concreto" },
           { id: 2, name: "Metalica" },
           { id: 3, name: "Sin Tapa" }
        ],

        canales: [
          { id: 1, name: "Presion Interna" },
          { id: 2, name: "Presion Externa" },
          { id: 3, name: "4-20mA" },
          { id: 4, name: "Digital Caudal" },
           { id: 5, name: "Modbus" },
             { id: 6, name: "Serial" },

        ],
  
        displayMultipleSelectValue: function () {
            return this.get("multipleSelectValue").join(", ");
        }



    });

    kendo.bind($("select"), viewModel);





    function onSelect(e) {



        $("#kendoUploadImage").show();
        $.each(e.files, function (index, value) {
            readMultipleFiles(value);
        });


    }



    function onSuccess(e) {



        var responseTxt = jQuery.parseJSON(e.XMLHttpRequest.responseText);



        var status = responseTxt.Status;

        var srcValue = responseTxt.PictureUrl;

        var reader = new FileReader();



        alert(srcValue);

        if (status == true) {

            $("#imgUploaded").attr('src', srcValue);

        } else {

            $("#imgUploaded").attr('src', srcValue);

            $("#kendoUploadImage").hide();

        }



    }
    function readMultipleFiles(file) {
        var reader = new FileReader();
        reader.onload = function (e) {
            // bind the file content
            $("img").attr({ src: e.target.result });
        }
        reader.readAsDataURL(file.rawFile);
    }
</script>

